## Рефакторинг программного кода
### Отчет по практике №1


1) **Непонятное название переменных и функций**

   *Влияние:*
   
        - Создает проблемы с читаемостью кода
        - Затрудняет поддержку и отладку
        - Увеличение времени разработки
        - Непровильно применение перменных/функций
   
    *Решение:* `Rename` - улучшить именование

3) **Дублирование кода**

   *Влияние:*
   
        - Затрудняет поддержку и отладку кода
        - Повышенный риск ошибок
        - Снижение читаемости кода
        - Рост объема кода
        - Сложность в маштабировании
   
    *Решение:* `Extract Method`- вынос дублирующего кода в отдельную функцию

5) **Слишком длинный метод или функциии, выполняющие несколько задач**

   *Влияние:*
   
        - Затрудняет поддержку и отладку кода
        - Снижение читаемости кода
        - Появляется дублироание кода
        - Проблемы с расширением функционала
   
    *Решение:* `Split Method` - разделить метод на два и более

7) **Неверная распределенность ответственности/нарушение SRP**

   *Влияние:*
   
        - Затрудняет поддержку и отладку
        - Потенциальное появление проблем
        - Снижение читаемости
        - Сложность тестирования
        - Увеличение связанности
   
    *Решение:* `Extract Class`

9) **Сложная вложенная логика**

   *Влияние:*
   
        - Затрудняет расширение
        - Ухудшает читаемость
        - Большое количество ветвлений
   
    *Решение:* `Decompose Conditional`

11) **Магические числа**

    *Влияние:*
    
        - Ухудшает читаемость
        - Затрудняет поддержку и отладку
        - Замедляет процесс разработки
        - Увеличивает риск появления ошибок
    
    *Решение:* `Replace Magic Number with Symbolic Constant`

13) **Отсутствие обработки исключений/ошибок**

    *Влияние:*
    
        - Некорректная работа приложения
    
    *Решение:* `Introduce Special Case`

15) **Магические строки**

    *Влияние:*
    
        - Ухудшает читаемость
        - Затрудняет поддержку и отладку
        - Замедляет процесс разработки
        - Увеличивает риск появления ошибок
    
    *Решение:* `Replace Magic Literal with Named Constant`


#### Этапы рефакторинга
- **Этап 1:** Изменение именование переменных/констант
- **Этап 2:** Избавление от магических чисел/строк
- **Этап 3:** Уменьшение вложенности условных операторов
- **Этап 4:** Разделение методов на более мелкие
- **Этап 5:** Разделение ответсвенности по файлам/классам

Начальное кол-во строк: **224**
Финальное кол-во строк: **345**


### Результат работы программы

#### До рефакторинга:
```
User saved: {"name":"John Doe","age":25,"discount":0.15,"isActive":true}
Starting report generation...
=== DETAILED REPORT ===
Report for: John Doe

Age: 25
Discount: 15 %
Active status: Active
Report date: 2025-09-08 19:01:36

DETAILS:
Account information:
Adult customer with standard discount
Customer is currently active
Last activity: 2025-09-01

RECOMMENDATIONS:

==================================================
Report generated by: Automated Reporting System
Generation timestamp: 2025-09-08 19:01:36
==================================================

==================================================
Report generated by: Automated Reporting System
Generation timestamp: 2025-09-08 19:01:36
==================================================
Report generated by: Automated Reporting System
Generation timestamp: 2025-09-08 19:01:36
==================================================
==================================================
Saving detailed report to database...
Report saved successfully
Report for John Doe completed at 19:01:36
Calculated discount: 0,15
```

#### После рефакторинга:
```
User saved: {"Name":"John Doe","Age":25,"Discount":0.15,"IsActive":true}
Starting report generation...
=== DETAILED REPORT ===
Report for: John Doe

Age: 25
Discount: 15 %
Active status: Active
Report date: 2025-09-17 12:37:09

DETAILS:
Account information:
Adult customer with standard discount
Customer is currently active
Last activity: 2025-09-10

RECOMMENDATIONS:

==================================================
Report generated by: Automated Reporting System
Generation timestamp: 2025-09-17 12:37:09
==================================================
Saving detailed report to database...
Report saved successfully
Report for John Doe completed at 12:37:09
Calculated discount: 0,15
```

### Тестирование методов

#### Метод `CalculateDiscount`

| Сценарий | Входные данные | Ожидаемый результат | Статус |
|-----------|----------------|------------------|--------|
| VIP клиент | isVIP = true, orders = 0 | 0.15 |  Пройдено |
| VIP клиент | isVIP = true, orders = 10 | 0.15 |  Пройдено |
| Не VIP, достаточное количество заказов | isVIP = false, orders = 6 | 0.10 |  Пройдено |
| Не VIP, достаточное количество заказов | isVIP = false, orders = 10 | 0.10 |  Пройдено |
| Не VIP, мало заказов | isVIP = false, orders = 0 | 0.0 |  Пройдено |
| Не VIP, мало заказов | isVIP = false, orders = 5 | 0.0 |  Пройдено |
| Отрицательное количество заказов | isVIP = false, orders = -1 | Исключение ArgumentOutOfRangeException |  Пройдено |

#### Метод `TryProcessUser`

### Тестирование метода `TryProcessUser`

| Сценарий                                   | Входные данные                          | Ожидаемый результат                               | Статус |
|--------------------------------------------|----------------------------------------|--------------------------------------------------|--------|
| Пользователь слишком молодой               | `age = 16, name = "John Doe"`          | `result = false`, `user = null`, вывод "User is too young" |  Пройдено |
| Корректный пользователь                     | `age = 25, name = "John Doe"`          | `result = true`, `user != null`, скидка = 0.0   |  Пройдено |
| VIP пользователь с 0 заказами               | `isVIP = true, orders = 0`             | Скидка = 0.15                                    |  Пройдено |
| VIP пользователь с 10 заказами              | `isVIP = true, orders = 10`            | Скидка = 0.15                                    |  Пройдено |
| Не VIP, достаточно заказов для скидки      | `isVIP = false, orders = 6`            | Скидка = 0.10                                    |  Пройдено |
| Не VIP, много заказов                       | `isVIP = false, orders = 20`           | Скидка = 0.10                                    |  Пройдено |
| Не VIP, мало заказов                        | `isVIP = false, orders = 0`            | Скидка = 0                                       |  Пройдено |
| Не VIP, почти достаточно заказов            | `isVIP = false, orders = 5`            | Скидка = 0                                       |  Пройдено |
| Отрицательное количество заказов            | `orders = -3`                           | `ArgumentOutOfRangeException`                   |  Пройдено |


